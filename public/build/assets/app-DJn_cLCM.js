var u=Object.defineProperty;var m=(r,t,e)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var a=(r,t,e)=>m(r,typeof t!="symbol"?t+"":t,e);const i=class i extends HTMLElement{static register(t){"customElements"in window&&customElements.define(t||"relative-time",i)}connectedCallback(){if(this.timeElements.length!==0){if(this.lastUpdate=0,this.updateLoop,this.setString(),this.enableUpdates&&typeof requestAnimationFrame=="function"){this.beginUpdateLoop();const{signal:t}=this.controller=new AbortController;window.addEventListener("focus",()=>{this.windowFocusHandler()},{signal:t}),window.addEventListener("blur",()=>{this.windowBlurHandler()},{signal:t})}typeof MutationObserver=="function"&&(this.observer=new MutationObserver(this.handleMutations.bind(this)),this.observeDateTimes())}}attributeChangedCallback(){this.setString()}disconnectedCallback(){this.controller&&this.controller.abort(),this.observer&&this.observer.disconnect()}observeDateTimes(){this.timeElements.forEach(t=>{this.observer.observe(t,{attributes:!0,attributeFilter:["datetime"]})})}handleMutations(){this.setString()}getRelativeTime(t,e){let s=(t.getTime()-Date.now())/1e3;if(e)return this.rtf.format(Math.round(s),e);for(const n of i.divisions){if(this.maxDivision&&n.name===this.maxDivision.replace(/s$/,""))return this.rtf.format(Math.round(s),n.name);if(Math.floor(Math.abs(s))<n.amount)return this.rtf.format(Math.round(s),n.name);s/=n.amount}}getDateTime(t){const e=new Date(t);return isNaN(e)?null:e}setString(){this.timeElements.forEach(t=>{const e=this.getDateTime(t.getAttribute("datetime"));if(!e)return;t.innerHTML=this.getRelativeTime(e,this.division);const s=e.toLocaleString(void 0,{timeZoneName:"short"});t.title!==s&&(t.title=s)})}beginUpdateLoop(){const t=e=>{this.updateLoop=requestAnimationFrame(t),e-this.lastUpdate>=this.update*1e3&&(this.setString(),this.lastUpdate=e)};this.updateLoop=requestAnimationFrame(t)}stopUpdateLoop(){this.lastUpdate=0,cancelAnimationFrame(this.updateLoop)}windowFocusHandler(){this.setString(),this.beginUpdateLoop()}windowBlurHandler(){this.stopUpdateLoop()}get locale(){var t;return this.getAttribute("lang")||((t=this.closest("[lang]"))==null?void 0:t.getAttribute("lang"))||void 0}get rtf(){return new Intl.RelativeTimeFormat(this.locale,{localeMatcher:"best fit",numeric:this.formatNumeric,style:this.formatStyle})}get timeElements(){return this.querySelectorAll("time[datetime]")}get division(){return this.getAttribute("division")}get maxDivision(){return this.getAttribute("max-division")}get formatNumeric(){const t=this.getAttribute("format-numeric")||this.getAttribute("numeric-format");return t&&i.numericFormats.includes(t)?t:this.division||this.maxDivision?"always":"auto"}get formatStyle(){const t=this.getAttribute("format-style")||this.getAttribute("style-format");return t&&i.styleFormats.includes(t)?t:"long"}get update(){return this.hasAttribute("update")?Number(this.getAttribute("update")):600}get enableUpdates(){return this.getAttribute("update")!=="false"}};a(i,"observedAttributes",["lang","update","division","max-division","format-numeric","numeric-format","format-style","style-format"]),a(i,"divisions",[{amount:60,name:"second"},{amount:60,name:"minute"},{amount:24,name:"hour"},{amount:7,name:"day"},{amount:4.34524,name:"week"},{amount:12,name:"month"},{amount:Number.POSITIVE_INFINITY,name:"year"}]),a(i,"numericFormats",["always","auto"]),a(i,"styleFormats",["long","short","narrow"]);let o=i;o.register();
